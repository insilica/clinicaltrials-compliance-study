schema: '2.0'
stages:
  download-20170105:
    cmd: stages/01_download_db_20170105.sh
    deps:
    - path: stages/01_download_db_20170105.sh
      hash: md5
      md5: 6369e51a35200af74e8359122d1afa11
      size: 500
    outs:
    - path: download/aact/db-dump/20170105_clinical_trials.zip
      hash: md5
      md5: 54550221d6d2f728b5df64ea40078b2b
      size: 639987071
  download-20240430:
    cmd: stages/01_download_db_20240430.sh
    deps:
    - path: stages/01_download_db_20240430.sh
      hash: md5
      md5: 0f380d067cb2eeab31c97253811e9fb5
      size: 412
    outs:
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
  download-paper-data:
    cmd: stages/01_download_paper_data.sh
    deps:
    - path: stages/01_download_paper_data.sh
      hash: md5
      md5: 9cbfcb140a15b9b54101639dff6653e0
      size: 524
    outs:
    - path: download/anderson2015
      hash: md5
      md5: 0f627e15c08e5ec23c2eabe0ad574d25.dir
      size: 4199399
      nfiles: 2
  build-paper-data:
    cmd: stages/02_build-anderson2015.sh
    deps:
    - path: download/anderson2015
      hash: md5
      md5: 0f627e15c08e5ec23c2eabe0ad574d25.dir
      size: 4199399
      nfiles: 2
    - path: stages/02_build-anderson2015.sh
      hash: md5
      md5: 0942894b0d5b0d180db7a7deecc38f64
      size: 464
    - path: stages/csv2parquet.py
      hash: md5
      md5: 7ad66f7287f06705bbbd11fd0791ad63
      size: 1260
    outs:
    - path: brick/anderson2015
      hash: md5
      md5: 1395cc31b50eca34bf0a57f5a4ed9d0f.dir
      size: 1387361
      nfiles: 4
  download-cthist-json:
    cmd: stages/01_download_cthist_json.sh
    deps:
    - path: brick/anderson2015
      hash: md5
      md5: 1395cc31b50eca34bf0a57f5a4ed9d0f.dir
      size: 1387361
      nfiles: 4
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: stages/01_download_cthist_json.sh
      hash: md5
      md5: 77aad131be4444d3d01bccb4527bb04b
      size: 952
    - path: stages/fetch-cthist-json.pl
      hash: md5
      md5: 23dba35a9c8dc9e086465328e53805d5
      size: 12974
    outs:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
  build-ctgov-studies-all@anderson2015_2008-2012:
    cmd:
    - mkdir -p $(dirname brick/analysis-20130927/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param anderson2015_2008-2012
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/analysis-20130927/ctgov-studies-all.parquet
      hash: md5
      md5: e398e75cc30c682bfce17698c97b4943
      size: 7180450
  build-ctgov-studies-all@stanford_2019-2023:
    cmd:
    - mkdir -p $(dirname brick/analysis-20240430/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param stanford_2019-2023
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/analysis-20240430/ctgov-studies-all.parquet
      hash: md5
      md5: 5029f68372bebb132660515ad623ce18
      size: 26047517
  build-ctgov-studies-hlact-filtered@anderson2015_2008-2012:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/analysis-20130927/ctgov-studies-hlact.parquet) brick/flowchart-counts
    - . .env; script/tt-render-by-param anderson2015_2008-2012 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh anderson2015_2008-2012
      > brick/flowchart-counts/anderson2015_2008-2012.csv
    deps:
    - path: brick/analysis-20130927/ctgov-studies-all.parquet
      hash: md5
      md5: e398e75cc30c682bfce17698c97b4943
      size: 7180450
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/analysis-20130927/ctgov-studies-hlact.parquet
      hash: md5
      md5: 649cdafff06b5ac678d6d36539754c53
      size: 993815
    - path: brick/flowchart-counts/anderson2015_2008-2012.csv
      hash: md5
      md5: 78247e9af2d847c9696e002c839ae627
      size: 153
  build-ctgov-studies-hlact-filtered@stanford_2019-2023:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/analysis-20240430/ctgov-studies-hlact.parquet) brick/flowchart-counts
    - . .env; script/tt-render-by-param stanford_2019-2023 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh stanford_2019-2023 > brick/flowchart-counts/stanford_2019-2023.csv
    deps:
    - path: brick/analysis-20240430/ctgov-studies-all.parquet
      hash: md5
      md5: 5029f68372bebb132660515ad623ce18
      size: 26047517
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/analysis-20240430/ctgov-studies-hlact.parquet
      hash: md5
      md5: d96865eac8577a3ce9df6f0bb3c85c3f
      size: 1687213
    - path: brick/flowchart-counts/stanford_2019-2023.csv
      hash: md5
      md5: cc63de128b1516df34baea9961d3e52f
      size: 158
  build-ctgov-studies-all@sliding-window_n-1_20130901:
    cmd:
    - mkdir -p $(dirname brick/sliding-window/n-1_20130901/ctgov-studies-all.parquet)
    - script/tt-render-by-param sliding-window_n-1_20130901 sql/create_cthist_all.sql
      | duckdb
    deps:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: c98c01d4acd0f12fa5b90ca355af8037
      size: 8389
    outs:
    - path: brick/sliding-window/n-1_20130901/ctgov-studies-all.parquet
      hash: md5
      md5: a907d0aa20829ee4eba7634f29406fd0
      size: 6151114
  build-ctgov-studies-all@sliding-window_n-2_20160101:
    cmd:
    - mkdir -p $(dirname brick/sliding-window/n-2_20160101/ctgov-studies-all.parquet)
    - script/tt-render-by-param sliding-window_n-2_20160101 sql/create_cthist_all.sql
      | duckdb
    deps:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: c98c01d4acd0f12fa5b90ca355af8037
      size: 8389
    outs:
    - path: brick/sliding-window/n-2_20160101/ctgov-studies-all.parquet
      hash: md5
      md5: 15a89461aa2b8dce4bc71743d6431131
      size: 8522162
  build-ctgov-studies-all@sliding-window_n-3_20180501:
    cmd:
    - mkdir -p $(dirname brick/sliding-window/n-3_20180501/ctgov-studies-all.parquet)
    - script/tt-render-by-param sliding-window_n-3_20180501 sql/create_cthist_all.sql
      | duckdb
    deps:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: c98c01d4acd0f12fa5b90ca355af8037
      size: 8389
    outs:
    - path: brick/sliding-window/n-3_20180501/ctgov-studies-all.parquet
      hash: md5
      md5: aacaaaa86009c292850350bffe3a4afc
      size: 11925329
  build-ctgov-studies-all@sliding-window_n-4_20200901:
    cmd:
    - mkdir -p $(dirname brick/sliding-window/n-4_20200901/ctgov-studies-all.parquet)
    - script/tt-render-by-param sliding-window_n-4_20200901 sql/create_cthist_all.sql
      | duckdb
    deps:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: c98c01d4acd0f12fa5b90ca355af8037
      size: 8389
    outs:
    - path: brick/sliding-window/n-4_20200901/ctgov-studies-all.parquet
      hash: md5
      md5: aaab04deb2706b6a8a1c7c78a281ca92
      size: 15690655
  build-ctgov-studies-all@sliding-window_n-5_20230101:
    cmd:
    - mkdir -p $(dirname brick/sliding-window/n-5_20230101/ctgov-studies-all.parquet)
    - script/tt-render-by-param sliding-window_n-5_20230101 sql/create_cthist_all.sql
      | duckdb
    deps:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: c98c01d4acd0f12fa5b90ca355af8037
      size: 8389
    outs:
    - path: brick/sliding-window/n-5_20230101/ctgov-studies-all.parquet
      hash: md5
      md5: b7c6c6afb880431fece5c6a7d5968e7a
      size: 19903201
  build-ctgov-studies-hlact-filtered@sliding-window_n-1_20130901:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/sliding-window/n-1_20130901/ctgov-studies-hlact.parquet)
    - . .env; script/tt-render-by-param sliding-window_n-1_20130901 sql/create_cthist_hlact.sql
      | duckdb
    deps:
    - path: brick/sliding-window/n-1_20130901/ctgov-studies-all.parquet
      hash: md5
      md5: a907d0aa20829ee4eba7634f29406fd0
      size: 6151114
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: a6a598b2d9b875dfd0abd5aae6170915
      size: 4300
    outs:
    - path: brick/sliding-window/n-1_20130901/ctgov-studies-hlact.parquet
      hash: md5
      md5: 1e0517756ca4d135d8205a3538bd8d08
      size: 958846
  build-ctgov-studies-hlact-filtered@sliding-window_n-2_20160101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/sliding-window/n-2_20160101/ctgov-studies-hlact.parquet)
    - . .env; script/tt-render-by-param sliding-window_n-2_20160101 sql/create_cthist_hlact.sql
      | duckdb
    deps:
    - path: brick/sliding-window/n-2_20160101/ctgov-studies-all.parquet
      hash: md5
      md5: 15a89461aa2b8dce4bc71743d6431131
      size: 8522162
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: a6a598b2d9b875dfd0abd5aae6170915
      size: 4300
    outs:
    - path: brick/sliding-window/n-2_20160101/ctgov-studies-hlact.parquet
      hash: md5
      md5: ad7aa65b93dd7ef4ccb0276e59af8af7
      size: 1059201
  build-ctgov-studies-hlact-filtered@sliding-window_n-3_20180501:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/sliding-window/n-3_20180501/ctgov-studies-hlact.parquet)
    - . .env; script/tt-render-by-param sliding-window_n-3_20180501 sql/create_cthist_hlact.sql
      | duckdb
    deps:
    - path: brick/sliding-window/n-3_20180501/ctgov-studies-all.parquet
      hash: md5
      md5: aacaaaa86009c292850350bffe3a4afc
      size: 11925329
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: a6a598b2d9b875dfd0abd5aae6170915
      size: 4300
    outs:
    - path: brick/sliding-window/n-3_20180501/ctgov-studies-hlact.parquet
      hash: md5
      md5: 1fdf0567a6f2bf3a582c8749ea989d6b
      size: 1244597
  build-ctgov-studies-hlact-filtered@sliding-window_n-4_20200901:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/sliding-window/n-4_20200901/ctgov-studies-hlact.parquet)
    - . .env; script/tt-render-by-param sliding-window_n-4_20200901 sql/create_cthist_hlact.sql
      | duckdb
    deps:
    - path: brick/sliding-window/n-4_20200901/ctgov-studies-all.parquet
      hash: md5
      md5: aaab04deb2706b6a8a1c7c78a281ca92
      size: 15690655
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: a6a598b2d9b875dfd0abd5aae6170915
      size: 4300
    outs:
    - path: brick/sliding-window/n-4_20200901/ctgov-studies-hlact.parquet
      hash: md5
      md5: 7f8378a9873fe9f470ba3fd015442b1c
      size: 1501195
  build-ctgov-studies-hlact-filtered@sliding-window_n-5_20230101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/sliding-window/n-5_20230101/ctgov-studies-hlact.parquet)
    - . .env; script/tt-render-by-param sliding-window_n-5_20230101 sql/create_cthist_hlact.sql
      | duckdb
    deps:
    - path: brick/sliding-window/n-5_20230101/ctgov-studies-all.parquet
      hash: md5
      md5: b7c6c6afb880431fece5c6a7d5968e7a
      size: 19903201
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: a6a598b2d9b875dfd0abd5aae6170915
      size: 4300
    outs:
    - path: brick/sliding-window/n-5_20230101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 127686e57d85a4c7ebcb8e1cfe265d80
      size: 1704928
  build-ctgov-studies-all@long-observe_n-1_20170101:
    cmd:
    - mkdir -p $(dirname brick/long-observe/n-1_20170101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param long-observe_n-1_20170101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/long-observe/n-1_20170101/ctgov-studies-all.parquet
      hash: md5
      md5: 7fca10d92c302d8acc95954523058a5d
      size: 11311218
  build-ctgov-studies-all@long-observe_n-2_20190101:
    cmd:
    - mkdir -p $(dirname brick/long-observe/n-2_20190101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param long-observe_n-2_20190101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/long-observe/n-2_20190101/ctgov-studies-all.parquet
      hash: md5
      md5: 379882403d3ad738f6e8b287cadc4df7
      size: 15108822
  build-ctgov-studies-all@long-observe_n-3_20210101:
    cmd:
    - mkdir -p $(dirname brick/long-observe/n-3_20210101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param long-observe_n-3_20210101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/long-observe/n-3_20210101/ctgov-studies-all.parquet
      hash: md5
      md5: a660d01806e29c6553b584c8bd80f20e
      size: 19089041
  build-ctgov-studies-all@long-observe_n-4_20230101:
    cmd:
    - mkdir -p $(dirname brick/long-observe/n-4_20230101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param long-observe_n-4_20230101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/long-observe/n-4_20230101/ctgov-studies-all.parquet
      hash: md5
      md5: a4dc3c84f31ba98732417f409fff8139
      size: 23204380
  build-ctgov-studies-hlact-filtered@long-observe_n-1_20170101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/long-observe/n-1_20170101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param long-observe_n-1_20170101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh long-observe_n-1_20170101
      > brick/flowchart-counts/long-observe_n-1_20170101.csv
    deps:
    - path: brick/long-observe/n-1_20170101/ctgov-studies-all.parquet
      hash: md5
      md5: 7fca10d92c302d8acc95954523058a5d
      size: 11311218
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/long-observe_n-1_20170101.csv
      hash: md5
      md5: 73307c1fa3666bb487bff6ef45a2e4e1
      size: 156
    - path: brick/long-observe/n-1_20170101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 4ecf02eb50c0179d02bc59509351643a
      size: 975197
  build-ctgov-studies-hlact-filtered@long-observe_n-2_20190101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/long-observe/n-2_20190101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param long-observe_n-2_20190101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh long-observe_n-2_20190101
      > brick/flowchart-counts/long-observe_n-2_20190101.csv
    deps:
    - path: brick/long-observe/n-2_20190101/ctgov-studies-all.parquet
      hash: md5
      md5: 379882403d3ad738f6e8b287cadc4df7
      size: 15108822
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/long-observe_n-2_20190101.csv
      hash: md5
      md5: 770f39ec1434f487a1c48d52b501c79f
      size: 156
    - path: brick/long-observe/n-2_20190101/ctgov-studies-hlact.parquet
      hash: md5
      md5: bfcd735d7ed7086e179dca26f6ee11b3
      size: 1094958
  build-ctgov-studies-hlact-filtered@long-observe_n-3_20210101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/long-observe/n-3_20210101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param long-observe_n-3_20210101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh long-observe_n-3_20210101
      > brick/flowchart-counts/long-observe_n-3_20210101.csv
    deps:
    - path: brick/long-observe/n-3_20210101/ctgov-studies-all.parquet
      hash: md5
      md5: a660d01806e29c6553b584c8bd80f20e
      size: 19089041
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/long-observe_n-3_20210101.csv
      hash: md5
      md5: 960a07b6e425eb5d4bc7add20171dd7d
      size: 157
    - path: brick/long-observe/n-3_20210101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 5483420302cf4d8fe2982ff927f11539
      size: 1197231
  build-ctgov-studies-hlact-filtered@long-observe_n-4_20230101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/long-observe/n-4_20230101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param long-observe_n-4_20230101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh long-observe_n-4_20230101
      > brick/flowchart-counts/long-observe_n-4_20230101.csv
    deps:
    - path: brick/long-observe/n-4_20230101/ctgov-studies-all.parquet
      hash: md5
      md5: a4dc3c84f31ba98732417f409fff8139
      size: 23204380
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/long-observe_n-4_20230101.csv
      hash: md5
      md5: 946dfd7202cf0a30786ecfa30e7b5a22
      size: 159
    - path: brick/long-observe/n-4_20230101/ctgov-studies-hlact.parquet
      hash: md5
      md5: e904c0248ee027a97fc5d9b0e3700a6d
      size: 1379905
  build-ctgov-studies-all@rule-effective-date-before:
    cmd:
    - mkdir -p $(dirname brick/rule-effective-date-before/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param rule-effective-date-before
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/rule-effective-date-before/ctgov-studies-all.parquet
      hash: md5
      md5: ead6862fab77b33e8363e0a84b89e5d9
      size: 11377498
  build-ctgov-studies-all@rule-effective-date-after:
    cmd:
    - mkdir -p $(dirname brick/rule-effective-date-after/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param rule-effective-date-after
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/rule-effective-date-after/ctgov-studies-all.parquet
      hash: md5
      md5: 2cbdfe9dd31903a1f1740f1f76450a06
      size: 25420131
  build-ctgov-studies-hlact-filtered@rule-effective-date-before:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/rule-effective-date-before/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param rule-effective-date-before sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh rule-effective-date-before
      > brick/flowchart-counts/rule-effective-date-before.csv
    deps:
    - path: brick/rule-effective-date-before/ctgov-studies-all.parquet
      hash: md5
      md5: ead6862fab77b33e8363e0a84b89e5d9
      size: 11377498
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/rule-effective-date-before.csv
      hash: md5
      md5: 73461b0e0a01ebcd7e5274f7547a44f8
      size: 155
    - path: brick/rule-effective-date-before/ctgov-studies-hlact.parquet
      hash: md5
      md5: 9806f477bc93f5166a82ffbfa328419e
      size: 1009652
  build-ctgov-studies-hlact-filtered@rule-effective-date-after:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/rule-effective-date-after/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param rule-effective-date-after sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh rule-effective-date-after
      > brick/flowchart-counts/rule-effective-date-after.csv
    deps:
    - path: brick/rule-effective-date-after/ctgov-studies-all.parquet
      hash: md5
      md5: 2cbdfe9dd31903a1f1740f1f76450a06
      size: 25420131
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/rule-effective-date-after.csv
      hash: md5
      md5: 4e6ed536909e95442a3f3baf7c0c6c99
      size: 158
    - path: brick/rule-effective-date-after/ctgov-studies-hlact.parquet
      hash: md5
      md5: 4d60c393b5d2f81b282ae2549893bb14
      size: 809333
  build-ctgov-historical-records:
    cmd:
    - mkdir -p brick/ctgov/historical
    - duckdb < sql/create_cthist_preproc.sql
    deps:
    - path: download/ctgov/historical
      hash: md5
      md5: e040593bab918704633877b9b5c89197.dir
      size: 72594385446
      nfiles: 492953
    - path: sql/create_cthist_preproc.sql
      hash: md5
      md5: dc33344bf52317909adcc2e7f17e7dbb
      size: 833
    outs:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
  analysis-driver-anderson2015-compare-stacked:
    cmd: "Rscript analysis/driver-anderson2015-compare-stacked.R\n"
    deps:
    - path: analysis/driver-anderson2015-compare-stacked.R
      hash: md5
      md5: 1437c99e5ac8f5589c63f5adc874ad92
      size: 968
    - path: brick/analysis-20130927
      hash: md5
      md5: f34448f3405571ddc30916a7ffb39364.dir
      size: 8174265
      nfiles: 2
    - path: brick/anderson2015
      hash: md5
      md5: 1395cc31b50eca34bf0a57f5a4ed9d0f.dir
      size: 1387361
      nfiles: 4
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: figtab/anderson2015.new
      hash: md5
      md5: b2c8007b454b7bdebf8fa3d3829ad189.dir
      size: 216185
      nfiles: 3
    - path: figtab/anderson2015.original
      hash: md5
      md5: 28ef42229e48bcbafc5fd2e209bfa79f.dir
      size: 221510
      nfiles: 3
  analysis-driver-rule-effective-date:
    cmd: "Rscript analysis/driver-rule-effective-date.R\n"
    deps:
    - path: analysis/driver-rule-effective-date.R
      hash: md5
      md5: 247381b5e67d60b55b04b4afef1db789
      size: 5939
    - path: brick/rule-effective-date_processed
      hash: md5
      md5: c1837f9afeba78ba1a78edc7f89f993f.dir
      size: 30231617
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: figtab/rule-effective
      hash: md5
      md5: 84bcfcfa77a9de316827846e571be33b.dir
      size: 5316302
      nfiles: 45
  build-ctgov-studies-all@yearly_obs36_n-1_20120101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-1_20120101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-1_20120101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-1_20120101/ctgov-studies-all.parquet
      hash: md5
      md5: 7d1f61b7ec3c689d8cadf66b9a15b921
      size: 5386795
  build-ctgov-studies-all@yearly_obs36_n-2_20130101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-2_20130101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-2_20130101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-2_20130101/ctgov-studies-all.parquet
      hash: md5
      md5: b697e9976476c1cfee5d033be725f500
      size: 6395740
  build-ctgov-studies-all@yearly_obs36_n-3_20140101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-3_20140101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-3_20140101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-3_20140101/ctgov-studies-all.parquet
      hash: md5
      md5: ca9a294e9cf72ba5cb4002b641cd1547
      size: 7462558
  build-ctgov-studies-all@yearly_obs36_n-4_20150101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-4_20150101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-4_20150101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-4_20150101/ctgov-studies-all.parquet
      hash: md5
      md5: 3fa45ef67f33bd8a6c8847d505361349
      size: 8659090
  build-ctgov-studies-all@yearly_obs36_n-5_20160101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-5_20160101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-5_20160101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-5_20160101/ctgov-studies-all.parquet
      hash: md5
      md5: 066a7c0565c8f8d6c67b5490c4aa93b9
      size: 9899848
  build-ctgov-studies-all@yearly_obs36_n-6_20170101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-6_20170101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-6_20170101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-6_20170101/ctgov-studies-all.parquet
      hash: md5
      md5: 538091f8fd49d8a40a5f26a047b23217
      size: 11306548
  build-ctgov-studies-all@yearly_obs36_n-7_20180101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-7_20180101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-7_20180101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-7_20180101/ctgov-studies-all.parquet
      hash: md5
      md5: f048bafa77db60c0363b47c9830e30eb
      size: 13269135
  build-ctgov-studies-all@yearly_obs36_n-8_20190101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-8_20190101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-8_20190101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-8_20190101/ctgov-studies-all.parquet
      hash: md5
      md5: d4f2fbc6b570368d50988611ecd7f305
      size: 15109397
  build-ctgov-studies-all@yearly_obs36_n-9_20200101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-9_20200101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-9_20200101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-9_20200101/ctgov-studies-all.parquet
      hash: md5
      md5: 5a432aea2ecb894a82d34114e23abae5
      size: 17009908
  build-ctgov-studies-all@yearly_obs36_n-10_20210101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-10_20210101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-10_20210101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-10_20210101/ctgov-studies-all.parquet
      hash: md5
      md5: b12fc5163a44a4f5f29963e3c4282f3e
      size: 19085197
  build-ctgov-studies-all@yearly_obs36_n-11_20220101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-11_20220101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-11_20220101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-11_20220101/ctgov-studies-all.parquet
      hash: md5
      md5: 5f27e408ab3449c9dfc07dd181918495
      size: 21159192
  build-ctgov-studies-all@yearly_obs36_n-12_20230101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-12_20230101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-12_20230101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-12_20230101/ctgov-studies-all.parquet
      hash: md5
      md5: 371d67a90ad69f57951895eca0bebd35
      size: 23204302
  build-ctgov-studies-all@yearly_obs36_n-13_20240101:
    cmd:
    - mkdir -p $(dirname brick/yearly_obs36/n-13_20240101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param yearly_obs36_n-13_20240101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/yearly_obs36/n-13_20240101/ctgov-studies-all.parquet
      hash: md5
      md5: 4dbc369012c10ac505a05905f5f28c28
      size: 25313234
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-1_20120101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-1_20120101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-1_20120101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-1_20120101
      > brick/flowchart-counts/yearly_obs36_n-1_20120101.csv
    deps:
    - path: brick/yearly_obs36/n-1_20120101/ctgov-studies-all.parquet
      hash: md5
      md5: 7d1f61b7ec3c689d8cadf66b9a15b921
      size: 5386795
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-1_20120101.csv
      hash: md5
      md5: ec017a7a9afc196b4de9680fb11630d6
      size: 151
    - path: brick/yearly_obs36/n-1_20120101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 9022b3dc1f81dfe02608dcc8e8728af6
      size: 265420
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-2_20130101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-2_20130101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-2_20130101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-2_20130101
      > brick/flowchart-counts/yearly_obs36_n-2_20130101.csv
    deps:
    - path: brick/yearly_obs36/n-2_20130101/ctgov-studies-all.parquet
      hash: md5
      md5: b697e9976476c1cfee5d033be725f500
      size: 6395740
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-2_20130101.csv
      hash: md5
      md5: 8d676419b49eb2de67548b7fa3f3c424
      size: 151
    - path: brick/yearly_obs36/n-2_20130101/ctgov-studies-hlact.parquet
      hash: md5
      md5: daadddbe96c0cade3fdcf3b5d30987e2
      size: 282332
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-3_20140101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-3_20140101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-3_20140101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-3_20140101
      > brick/flowchart-counts/yearly_obs36_n-3_20140101.csv
    deps:
    - path: brick/yearly_obs36/n-3_20140101/ctgov-studies-all.parquet
      hash: md5
      md5: ca9a294e9cf72ba5cb4002b641cd1547
      size: 7462558
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-3_20140101.csv
      hash: md5
      md5: c046c340cc7618ea39588db171e01b0c
      size: 152
    - path: brick/yearly_obs36/n-3_20140101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 9cb7a3fa73051749e8dc4e0e36df6981
      size: 290808
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-4_20150101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-4_20150101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-4_20150101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-4_20150101
      > brick/flowchart-counts/yearly_obs36_n-4_20150101.csv
    deps:
    - path: brick/yearly_obs36/n-4_20150101/ctgov-studies-all.parquet
      hash: md5
      md5: 3fa45ef67f33bd8a6c8847d505361349
      size: 8659090
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-4_20150101.csv
      hash: md5
      md5: 6412cd064a45e4393ff926df0e380a61
      size: 152
    - path: brick/yearly_obs36/n-4_20150101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 694e5deae889f9ba8e4b00e755b3e6d6
      size: 308224
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-5_20160101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-5_20160101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-5_20160101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-5_20160101
      > brick/flowchart-counts/yearly_obs36_n-5_20160101.csv
    deps:
    - path: brick/yearly_obs36/n-5_20160101/ctgov-studies-all.parquet
      hash: md5
      md5: 066a7c0565c8f8d6c67b5490c4aa93b9
      size: 9899848
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-5_20160101.csv
      hash: md5
      md5: babaeb1c035b150a05be12792765dd97
      size: 151
    - path: brick/yearly_obs36/n-5_20160101/ctgov-studies-hlact.parquet
      hash: md5
      md5: bd6a2e64a6acaefa252c4d2292efac1f
      size: 310237
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-6_20170101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-6_20170101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-6_20170101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-6_20170101
      > brick/flowchart-counts/yearly_obs36_n-6_20170101.csv
    deps:
    - path: brick/yearly_obs36/n-6_20170101/ctgov-studies-all.parquet
      hash: md5
      md5: 538091f8fd49d8a40a5f26a047b23217
      size: 11306548
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-6_20170101.csv
      hash: md5
      md5: 05c7ecaf37364efffe59765f7d1c4fae
      size: 152
    - path: brick/yearly_obs36/n-6_20170101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 990f729cdcb986deae14ce15d42ad847
      size: 317596
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-7_20180101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-7_20180101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-7_20180101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-7_20180101
      > brick/flowchart-counts/yearly_obs36_n-7_20180101.csv
    deps:
    - path: brick/yearly_obs36/n-7_20180101/ctgov-studies-all.parquet
      hash: md5
      md5: f048bafa77db60c0363b47c9830e30eb
      size: 13269135
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-7_20180101.csv
      hash: md5
      md5: 0e4c7857d85b765dce87a85a7ecf85a5
      size: 153
    - path: brick/yearly_obs36/n-7_20180101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 2f2d3b1154714e59c2db5bcf779127c9
      size: 340705
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-8_20190101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-8_20190101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-8_20190101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-8_20190101
      > brick/flowchart-counts/yearly_obs36_n-8_20190101.csv
    deps:
    - path: brick/yearly_obs36/n-8_20190101/ctgov-studies-all.parquet
      hash: md5
      md5: d4f2fbc6b570368d50988611ecd7f305
      size: 15109397
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-8_20190101.csv
      hash: md5
      md5: e60824da8c383c579d6214ddadd6c240
      size: 155
    - path: brick/yearly_obs36/n-8_20190101/ctgov-studies-hlact.parquet
      hash: md5
      md5: a33faf71e705ed38a240619eb50f1c4a
      size: 358874
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-9_20200101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-9_20200101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-9_20200101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-9_20200101
      > brick/flowchart-counts/yearly_obs36_n-9_20200101.csv
    deps:
    - path: brick/yearly_obs36/n-9_20200101/ctgov-studies-all.parquet
      hash: md5
      md5: 5a432aea2ecb894a82d34114e23abae5
      size: 17009908
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-9_20200101.csv
      hash: md5
      md5: 049e79f142f1a4209f97f2ef0aeed390
      size: 155
    - path: brick/yearly_obs36/n-9_20200101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 75cd7184ab87650f0cb8394b05f7e50b
      size: 403678
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-10_20210101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-10_20210101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-10_20210101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-10_20210101
      > brick/flowchart-counts/yearly_obs36_n-10_20210101.csv
    deps:
    - path: brick/yearly_obs36/n-10_20210101/ctgov-studies-all.parquet
      hash: md5
      md5: b12fc5163a44a4f5f29963e3c4282f3e
      size: 19085197
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-10_20210101.csv
      hash: md5
      md5: 7df85df3dd3f215098574c9162e9f443
      size: 155
    - path: brick/yearly_obs36/n-10_20210101/ctgov-studies-hlact.parquet
      hash: md5
      md5: ddcc2bf40e42e6c81908db79382a3ab9
      size: 414556
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-11_20220101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-11_20220101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-11_20220101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-11_20220101
      > brick/flowchart-counts/yearly_obs36_n-11_20220101.csv
    deps:
    - path: brick/yearly_obs36/n-11_20220101/ctgov-studies-all.parquet
      hash: md5
      md5: 5f27e408ab3449c9dfc07dd181918495
      size: 21159192
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-11_20220101.csv
      hash: md5
      md5: 31948fec9d0b68a3af395878b308bff1
      size: 156
    - path: brick/yearly_obs36/n-11_20220101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 0229d666ceba9f8e1e4925d7a2399c7c
      size: 449166
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-12_20230101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-12_20230101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-12_20230101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-12_20230101
      > brick/flowchart-counts/yearly_obs36_n-12_20230101.csv
    deps:
    - path: brick/yearly_obs36/n-12_20230101/ctgov-studies-all.parquet
      hash: md5
      md5: 371d67a90ad69f57951895eca0bebd35
      size: 23204302
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-12_20230101.csv
      hash: md5
      md5: 77c64aa4fb399e9aafc677df71c55091
      size: 156
    - path: brick/yearly_obs36/n-12_20230101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 05a942476b288e4992b5e8cbd8c0dfb4
      size: 475019
  build-ctgov-studies-hlact-filtered@yearly_obs36_n-13_20240101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/yearly_obs36/n-13_20240101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param yearly_obs36_n-13_20240101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh yearly_obs36_n-13_20240101
      > brick/flowchart-counts/yearly_obs36_n-13_20240101.csv
    deps:
    - path: brick/yearly_obs36/n-13_20240101/ctgov-studies-all.parquet
      hash: md5
      md5: 4dbc369012c10ac505a05905f5f28c28
      size: 25313234
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/yearly_obs36_n-13_20240101.csv
      hash: md5
      md5: 59fe8b1b0fe06ed47666c5b264724f2c
      size: 156
    - path: brick/yearly_obs36/n-13_20240101/ctgov-studies-hlact.parquet
      hash: md5
      md5: f3b05f18cfce920dca75fa0717bd4234
      size: 461849
  build-ctgov-studies-all@pre-post-2017_n-1_20200101:
    cmd:
    - mkdir -p $(dirname brick/pre-post-2017/n-1_20200101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param pre-post-2017_n-1_20200101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/pre-post-2017/n-1_20200101/ctgov-studies-all.parquet
      hash: md5
      md5: b26372d045894d0fd886c3f95d572238
      size: 17008875
  build-ctgov-studies-all@pre-post-2017_n-2_20240101:
    cmd:
    - mkdir -p $(dirname brick/pre-post-2017/n-2_20240101/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param pre-post-2017_n-2_20240101
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/pre-post-2017/n-2_20240101/ctgov-studies-all.parquet
      hash: md5
      md5: 288b3f5d955681eecec681fb15a77f65
      size: 25327099
  build-ctgov-studies-hlact-filtered@pre-post-2017_n-1_20200101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/pre-post-2017/n-1_20200101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param pre-post-2017_n-1_20200101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh pre-post-2017_n-1_20200101
      > brick/flowchart-counts/pre-post-2017_n-1_20200101.csv
    deps:
    - path: brick/pre-post-2017/n-1_20200101/ctgov-studies-all.parquet
      hash: md5
      md5: b26372d045894d0fd886c3f95d572238
      size: 17008875
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/pre-post-2017_n-1_20200101.csv
      hash: md5
      md5: 68596a59fc52aca4d9d08bd65e85e865
      size: 156
    - path: brick/pre-post-2017/n-1_20200101/ctgov-studies-hlact.parquet
      hash: md5
      md5: 85b182a91458d9b5ea6bc7e38081f4f7
      size: 1230522
  build-ctgov-studies-hlact-filtered@pre-post-2017_n-2_20240101:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/pre-post-2017/n-2_20240101/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param pre-post-2017_n-2_20240101 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh pre-post-2017_n-2_20240101
      > brick/flowchart-counts/pre-post-2017_n-2_20240101.csv
    deps:
    - path: brick/pre-post-2017/n-2_20240101/ctgov-studies-all.parquet
      hash: md5
      md5: 288b3f5d955681eecec681fb15a77f65
      size: 25327099
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/pre-post-2017_n-2_20240101.csv
      hash: md5
      md5: 261accdc9293daa464cdb080ad7fe2a0
      size: 159
    - path: brick/pre-post-2017/n-2_20240101/ctgov-studies-hlact.parquet
      hash: md5
      md5: aff7ad92926f497680d26e59bac55fff
      size: 1617355
  build-ctgov-studies-all@rule-effective-date-after-no-initiated:
    cmd:
    - mkdir -p $(dirname brick/rule-effective-date-after-no-initiated/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param rule-effective-date-after-no-initiated
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/rule-effective-date-after-no-initiated/ctgov-studies-all.parquet
      hash: md5
      md5: 8dbc2bf48b1fdd8485080d5ac74885c4
      size: 25409093
  build-ctgov-studies-hlact-filtered@rule-effective-date-after-no-initiated:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/rule-effective-date-after-no-initiated/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param rule-effective-date-after-no-initiated sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh rule-effective-date-after-no-initiated
      > brick/flowchart-counts/rule-effective-date-after-no-initiated.csv
    deps:
    - path: brick/rule-effective-date-after-no-initiated/ctgov-studies-all.parquet
      hash: md5
      md5: 8dbc2bf48b1fdd8485080d5ac74885c4
      size: 25409093
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/rule-effective-date-after-no-initiated.csv
      hash: md5
      md5: defc6e8810e3b17c66383ffbf577ee23
      size: 159
    - path: brick/rule-effective-date-after-no-initiated/ctgov-studies-hlact.parquet
      hash: md5
      md5: 2f1f9305b2cd4a529ef6afc2460d5172
      size: 1614816
  plotter_py:
    cmd: "python3 analysis/plotter.py\n"
    deps:
    - path: analysis/plotter.py
      hash: md5
      md5: 6ca1a8ffb08918ae609bef2688133bb1
      size: 24085
    - path: analysis/utils.py
      hash: md5
      md5: 1046a0decdef6683c7d3f7aa5748237b
      size: 6226
    - path: brick/rule-effective-date_processed
      hash: md5
      md5: c1837f9afeba78ba1a78edc7f89f993f.dir
      size: 30231617
      nfiles: 3
    - path: brick/yearly_obs36_processed
      hash: md5
      md5: 02f540cdaf7a181934ac0b4b65fd519f.dir
      size: 138852738
      nfiles: 14
    outs:
    - path: figtab/plotter_py
      hash: md5
      md5: a77cd7c5e8b44e769f15943cba4d8758.dir
      size: 107494
      nfiles: 12
  process-driver-sliding@long-observe:
    cmd: Rscript analysis/driver-sliding-process.R params.yaml long-observe
    deps:
    - path: analysis/driver-sliding-process.R
      hash: md5
      md5: 9e4b8c2f0237470963a29a82f15550d7
      size: 799
    - path: brick/long-observe
      hash: md5
      md5: 8f6dee67144a1820129d66576a0ba09b.dir
      size: 73360752
      nfiles: 8
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: brick/long-observe_processed
      hash: md5
      md5: ef581efcad47d0c674c25c474f79676a.dir
      size: 59315666
      nfiles: 5
  process-driver-sliding@yearly_obs36:
    cmd: Rscript analysis/driver-sliding-process.R params.yaml yearly_obs36
    deps:
    - path: analysis/driver-sliding-process.R
      hash: md5
      md5: 9e4b8c2f0237470963a29a82f15550d7
      size: 799
    - path: brick/yearly_obs36
      hash: md5
      md5: 8f036ff7218acd12508b0d314787f660.dir
      size: 187939408
      nfiles: 26
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: brick/yearly_obs36_processed
      hash: md5
      md5: 02f540cdaf7a181934ac0b4b65fd519f.dir
      size: 138852738
      nfiles: 14
  analysis-driver-sliding@long-observe:
    cmd: "Rscript analysis/driver-sliding.R params.yaml long-observe\n"
    deps:
    - path: analysis/driver-sliding.R
      hash: md5
      md5: e757720418d86e5009653920bacfe4bf
      size: 1346
    - path: brick/long-observe_processed
      hash: md5
      md5: ef581efcad47d0c674c25c474f79676a.dir
      size: 59315666
      nfiles: 5
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: figtab/long-observe
      hash: md5
      md5: ea5b0bd6d9f1aba92ebd304a5f3e309f.dir
      size: 898270
      nfiles: 9
  analysis-driver-sliding@yearly_obs36:
    cmd: "Rscript analysis/driver-sliding.R params.yaml yearly_obs36\n"
    deps:
    - path: analysis/driver-sliding.R
      hash: md5
      md5: e757720418d86e5009653920bacfe4bf
      size: 1346
    - path: brick/yearly_obs36_processed
      hash: md5
      md5: 02f540cdaf7a181934ac0b4b65fd519f.dir
      size: 138852738
      nfiles: 14
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: figtab/yearly_obs36
      hash: md5
      md5: 5f1519fa776fc73fe4c907dfa04b7f79.dir
      size: 1580746
      nfiles: 9
  process-driver-rule-effective-date:
    cmd: "Rscript analysis/driver-rule-effective-date-process.R\n"
    deps:
    - path: analysis/driver-rule-effective-date-process.R
      hash: md5
      md5: c3dac5d2b58bb90c583282abdfa65256
      size: 799
    - path: brick/rule-effective-date-after
      hash: md5
      md5: 9b0dabb7487b32733c931d6604dfa3a8.dir
      size: 26229464
      nfiles: 2
    - path: brick/rule-effective-date-before
      hash: md5
      md5: bf083c1adb22572ebf2c37e0e7474153.dir
      size: 12387150
      nfiles: 2
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: brick/rule-effective-date_processed
      hash: md5
      md5: c1837f9afeba78ba1a78edc7f89f993f.dir
      size: 30231617
      nfiles: 3
  aggregate-data:
    cmd: "Rscript analysis/driver-aggregate-data.R\n"
    deps:
    - path: analysis/driver-aggregate-data.R
      hash: md5
      md5: f2d7bb3593304117dc2452fd50321975
      size: 12068
    - path: brick/rule-effective-date_processed
      hash: md5
      md5: c1837f9afeba78ba1a78edc7f89f993f.dir
      size: 30231617
      nfiles: 3
    - path: brick/yearly_obs36_processed
      hash: md5
      md5: 02f540cdaf7a181934ac0b4b65fd519f.dir
      size: 138852738
      nfiles: 14
    outs:
    - path: figtab/aggregate-data
      hash: md5
      md5: 631aff4c414326da5a8162a00d76e041.dir
      size: 24743
      nfiles: 1
  analysis-driver-anderson2015-survival:
    cmd: "Rscript analysis/driver-anderson2015-survival.R\n"
    deps:
    - path: analysis/driver-anderson2015-survival.R
      hash: md5
      md5: add5b2c97f907ad9421edba8c68b7714
      size: 3318
    - path: brick/anderson2015
      hash: md5
      md5: 1395cc31b50eca34bf0a57f5a4ed9d0f.dir
      size: 1387361
      nfiles: 4
    outs:
    - path: figtab/anderson2015
      hash: md5
      md5: 71787654e3e84f88ddd229b8af810bcd.dir
      size: 871938
      nfiles: 12
  analysis-driver-rule-effective-date-extra-analysis:
    cmd: "Rscript analysis/driver-rule-effective-date-extra-analysis.R\n"
    deps:
    - path: analysis/driver-rule-effective-date-extra-analysis.R
      hash: md5
      md5: f1bdd9c0fcb339201044aca6da63d1c2
      size: 5409
    - path: brick/rule-effective-date_processed
      hash: md5
      md5: c1837f9afeba78ba1a78edc7f89f993f.dir
      size: 30231617
      nfiles: 3
    - path: params.yaml
      hash: md5
      md5: 59a86acc308c6ac883bc751ebac18b44
      size: 10815
    outs:
    - path: figtab/rule-effective-extra-analysis
      hash: md5
      md5: e58639e56ec98f051710b92449c1b9cd.dir
      size: 2183
      nfiles: 2
  build-ctgov-studies-all@post-rule-to-20240430:
    cmd:
    - mkdir -p $(dirname brick/post-rule-to-20240430/ctgov-studies-all.parquet)
    - ". .env;\n(\n  if [ -n \"$MY_DUCKDB_TEMP_DIR\" ] && [ -d \"$MY_DUCKDB_TEMP_DIR\"\
      \ ]; then\n    echo \"Setting the DuckDB temp_directory to $MY_DUCKDB_TEMP_DIR\"\
      \ >&2 ;\n    echo \"SET temp_directory='$MY_DUCKDB_TEMP_DIR';\" ;\n  fi;\n \
      \ if [ -n \"$MY_DUCKDB_MEMORY_LIMIT\" ]; then\n    echo \"Setting the DuckDB
      memory_limit to $MY_DUCKDB_MEMORY_LIMIT\" >&2 ;\n    echo \"SET memory_limit
      = '$MY_DUCKDB_MEMORY_LIMIT';\" ;\n  fi;\n  script/tt-render-by-param post-rule-to-20240430
      sql/create_cthist_all.sql\n) | duckdb\n"
    deps:
    - path: brick/ctgov/historical/records.parquet
      hash: md5
      md5: 988d90eaa5fb17013faefda819041dc8
      size: 15053123261
    - path: sql/create_cthist_all.sql
      hash: md5
      md5: 4f72841767ed5eb80e48274cc84fd491
      size: 10048
    outs:
    - path: brick/post-rule-to-20240430/ctgov-studies-all.parquet
      hash: md5
      md5: 6df3543ab7925b2a793ead6515ac9b3e
      size: 26050118
  build-ctgov-studies-hlact-filtered@post-rule-to-20240430:
    cmd:
    - make docker-compose-up
    - mkdir -p $(dirname brick/post-rule-to-20240430/ctgov-studies-hlact.parquet)
      brick/flowchart-counts
    - . .env; script/tt-render-by-param post-rule-to-20240430 sql/create_cthist_hlact.sql
      | duckdb
    - . .env; script/cthist_hlact_flowchart_partial_sql.sh post-rule-to-20240430 >
      brick/flowchart-counts/post-rule-to-20240430.csv
    deps:
    - path: brick/post-rule-to-20240430/ctgov-studies-all.parquet
      hash: md5
      md5: 6df3543ab7925b2a793ead6515ac9b3e
      size: 26050118
    - path: download/aact/db-dump/20240430_clinical_trials.zip
      hash: md5
      md5: dd7dd067786f58bbd6cd43758fc1a3da
      size: 1831128430
    - path: script/cthist_hlact_flowchart_partial_sql.sh
      hash: md5
      md5: 1db79b15a5092fe0ee8a047765603488
      size: 612
    - path: sql/create_cthist_hlact.sql
      hash: md5
      md5: d718da8627c47d826273ca017f299f7c
      size: 6315
    - path: sql/params/hlact-filter
      hash: md5
      md5: e38c532719f7c8259be3ff8384d09290.dir
      size: 4050
      nfiles: 9
    outs:
    - path: brick/flowchart-counts/post-rule-to-20240430.csv
      hash: md5
      md5: be804ba9bc1576ba6cbc5d413fd62db2
      size: 158
    - path: brick/post-rule-to-20240430/ctgov-studies-hlact.parquet
      hash: md5
      md5: c11282c994aa878ff35ac3aa22310f06
      size: 2388745
  analysis-post-rule-to-20240430-by_sponsor:
    cmd: "Rscript analysis/driver-results-compliance-by-sponsor.R\n"
    deps:
    - path: analysis/driver-results-compliance-by-sponsor.R
      hash: md5
      md5: b285f9df38bcbb720cc4f441e503a9cf
      size: 2005
    - path: brick/post-rule-to-20240430
      hash: md5
      md5: 49f180f9b638082160d55408f84aaa6e.dir
      size: 28438863
      nfiles: 2
    outs:
    - path: figtab/post-rule-to-20240430-by_sponsor
      hash: md5
      md5: ccc319c6053b8c5414242021a25144c7.dir
      size: 596618
      nfiles: 1
